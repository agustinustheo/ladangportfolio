<p id="notice">
    <%= notice %>
</p>

<div class="lapor-profile">
    <div class="lapor-profile-picture" style="overflow: hidden">
        <% if @user.profile == nil || @user.profile.profile_picture == '' %>
            <%= image_tag "anonymous/profile_male.jpg", :class => "lapor-profile-resize" %>
        <% else %>
            <%= image_tag @user.profile.profile_picture, :class => "lapor-profile-resize"  %>
        <% end %>
    </div>
    <h1 class="lapor-profile-name">
        <% if @user.profile == nil || @user.profile.fullname == '' %>
            <%= @user.username %> 
        <% else %>
            <%= @user.profile.fullname %>
        <% end %>
    </h1>
    <div id="uploadModalShow" style="text-align: center; cursor: pointer; line-height: 27px; width: 100px; height: 28px; background: #dd5858; color: white; border-radius: 5px;">
        Upload
    </div>
    <div id="workbookShow" style="text-align: center; cursor: pointer; line-height: 27px; width: 100px; height: 28px; background: #dd5858; color: white; border-radius: 5px;">
        Show
    </div>
    <div id="addShelf" style="text-align: center; cursor: pointer; line-height: 27px; width: 100px; height: 28px; background: #dd5858; color: white; border-radius: 5px;">
        Add Shelf
    </div>
    <%= link_to 'Create', create_uploadBook_path(@user.book), :remote => true %>
    <!--
    <%= form_tag create_convert_path, method: :post do %>
        <%= submit_tag 'Call Action' %>
    <% end %>
    -->
</div>

<div id="shelf">
    <div id="shelfBookContainer" style="display: flex; padding-left: 7px; padding-right: 7px; width: calc(200px - 14px); height: calc(594px / 2);">
        <div id="workbook" style="width: 30px; height: 100%; background: yellow; cursor: pointer;"></div>
    </div>
    <div id="woodenShelf" style="width: 200px; height: 20px; border-radius: 7px; background: brown;"></div>
</div>

<div id="modal" style="display: none; top: 0; left: 0; position: fixed; background: rgba(192,192,192,0.7); width: 100vw; height: 100vh;">
    <div id="uploadWorkbook" style="display: none; background: white; left: calc((100vw - 400px) / 2); width: 400px; height: 600px; top: calc((100vh - 600px) / 2); position: absolute;">
        <h1>Upload Book</h1>
        <%= render 'upload', book: @book %>    
    </div>
    <div id="workbookView" style="display: none; left: calc((100vw - 840px) / 2); top: calc((100vh - 594px) / 2); position: absolute;">
        <%= render 'bookView' %>
    </div>
    <div id="closeModal" class="lapor-exit-box" style="position: absolute; top: 10px; right: 10px">
        X
    </div>
</div>  

<script type="text/javascript">
    $(document).ready(function(){
        $('#uploadModalShow').on('click', function(){
            // $('#modal').show();
            $('#modal').fadeIn(500, function(){
               $('#uploadWorkbook').fadeIn(500);
            });
        });
        $('#workbookShow').on('click', function(){
            $('#modal').fadeIn(500, function(){
               $('#workbookView').fadeIn(500);
            });
        });
        $('#workbook').on('click', function(){
            $('#modal').fadeIn(500, function(){
               $('#workbookView').fadeIn(500);
            });
        });
        $('#closeModal').on('click', function(){
            $('#modal').fadeOut(500, function(){
                $('#uploadWorkbook').hide();
                $('#workbookView').hide();
            });
        });
        // $('#modal *').on('click', function(e){
        //     e.stopPropagation();
        // });
    });
    // setTimeout(function(){
    //     document.getElementById('laporNavbar').style.transform = 'translateY(-42px)';
    //     document.getElementById('laporBody').style.transform = 'translateY(-42px)';
    // }, 200);
</script>